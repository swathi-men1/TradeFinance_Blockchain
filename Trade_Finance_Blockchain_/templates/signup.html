<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Signup | TradeChain</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#0b1220,#060b16);
  font-family:Segoe UI, Arial, sans-serif;
  color:#e5e7eb;
}

.card{
  width:420px;
  background:#111a2e;
  padding:32px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
}

h2{
  text-align:center;
  margin-bottom:22px;
  color:#20c997;
}

input, select{
  width:100%;
  padding:13px;
  margin-top:14px;
  border-radius:10px;
  border:1px solid #1f2a44;
  background:#0f1b33;
  color:#e5e7eb;
  font-size:14px;
}

input:focus, select:focus{
  outline:none;
  border-color:#20c997;
}

button{
  width:100%;
  margin-top:24px;
  padding:13px;
  border-radius:12px;
  border:none;
  background:#20c997;
  color:#022c22;
  font-weight:600;
  font-size:15px;
  cursor:pointer;
}

button:hover{
  background:#17b48a;
}

.hint{
  display:none;
  margin-top:10px;
  padding:10px;
  border-radius:10px;
  font-size:13px;
  background:#3b0a0a;
  border:1px solid #dc2626;
  color:#fca5a5;
}

code{
  color:#20c997;
}

.msg{
  padding:10px;
  border-radius:10px;
  margin-bottom:16px;
  font-size:14px;
}

.error{
  background:#3b0a0a;
  border:1px solid #dc2626;
  color:#fca5a5;
}

.success{
  background:#062e1f;
  border:1px solid #10b981;
  color:#6ee7b7;
}

.link{
  text-align:center;
  margin-top:18px;
  font-size:14px;
}

.link a{
  color:#9ca3af;
  text-decoration:none;
}

.link a:hover{
  color:#20c997;
  text-decoration:underline;
}
</style>
</head>

<body>

<div class="card">
  <h2>Create Account</h2>

  {% if request.query_params.get("error") %}
    <div class="msg error">{{ request.query_params.get("error") }}</div>
  {% endif %}

  {% if request.query_params.get("success") %}
    <div class="msg success">{{ request.query_params.get("success") }}</div>
  {% endif %}

  <form action="/auth/signup" method="post" onsubmit="return validatePassword()">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email" required>

    <input
      type="password"
      name="password"
      id="password"
      maxlength="72"
      placeholder="Password"
      required
      oninput="checkPassword()"
    >

    <div id="passwordHint" class="hint">
      Password must include:
      <ul>
        <li>1 uppercase letter</li>
        <li>1 lowercase letter</li>
        <li>1 number</li>
        <li>1 special character</li>
      </ul>
      Example: <code>Trade@123</code>
    </div>

    <select name="role" required>
      <option value="">Select Role</option>
      <option value="buyer">Buyer</option>
      <option value="seller">Seller</option>
      <option value="bank">Bank</option>
    </select>

    <input type="text" name="org_name" placeholder="Organization Name" required>

    <button type="submit">Signup</button>
  </form>

  <div class="link">
    Already have an account?
    <a href="/auth/login">Login</a>
  </div>
</div>

<script>
function checkPassword(){
  const pwd = document.getElementById("password").value;
  const hint = document.getElementById("passwordHint");
  const regex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&]).{1,72}$/;

  if(pwd.length === 0){
    hint.style.display = "none";
    return;
  }
  hint.style.display = regex.test(pwd) ? "none" : "block";
}

function validatePassword(){
  const pwd = document.getElementById("password").value;
  const regex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&]).{1,72}$/;
  return regex.test(pwd);
}
</script>

</body>
</html>
